#!/usr/bin/env bash
#Parse the Apache log and use awk to group by IP and HTTP status code
awk '{ ip[$1" "$9]++ } END { for (key in ip) { split(key, arr, " "); print ip[key], arr[1], arr[2] } }' apache-access.log \
    | sort -nr \
    | head -n 10
